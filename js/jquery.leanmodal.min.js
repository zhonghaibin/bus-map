(function ($) {
    $.fn.extend({
        leanModal: function (options) {
            var defaults = { top: 100, overlay: 0.5, closeButton: "modal_close" };
            options = $.extend(defaults, options);
            return this.each(function () {
                $(this).click(function (e) {
                    var modal_id = $(this).attr("href");
                    PopupModal(modal_id, options);
                    e.preventDefault();
                })
            });
        }
    })
})(jQuery);
var lean_overlay_created = false;
function PopupModal(modal_id, option) {
    var o;
    if (option == null)
        o = { top: 10, overlay: 0.5, closeButton: ".modal_close" };
    else
        o = option;
    var overlay = $("<div id='lean_overlay'></div>");
    $("body").append(overlay);
    $("#lean_overlay").click(function () { CloseModal(modal_id) });
    $(o.closeButton).click(function () { CloseModal(modal_id) });
    var modal_height = $(modal_id).outerHeight();
    var modal_width = $(modal_id).outerWidth();
    $("#lean_overlay").css({ "display": "block", opacity: 0 });
    $("#lean_overlay").fadeTo(200, o.overlay);
    $(modal_id).css({ "display": "block", "position": "fixed", "opacity": 0, "z-index": 998, "left": 50 + "%", "margin-left": -(modal_width / 2) + "px", "top": o.top + "px" });
    $(modal_id).fadeTo(200, 1);
}
function CloseModal(modal_id) {
    $("#lean_overlay").fadeOut(200);
    $(modal_id).css({ "display": "none" });
}
