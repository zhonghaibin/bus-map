<!DOCTYPE html><html><head lang="en">    <meta charset="UTF-8">    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>    <script src="js/jquery1.42.min.js" type="text/javascript"></script>    <script src="js/jquery.SuperSlide.2.1.1.js" type="text/javascript"></script>    <script src="js/jquery.leanmodal.min.js" type="text/javascript"></script>    <script src="js/jquery.zclip.js" type="text/javascript"></script>    <title>公交路线</title>    <meta name="Keywords" content=""/>    <meta name="Description" content=""/>    <link rel="stylesheet" href="css/media_map.css"/>    <link rel="stylesheet" href="css/main1119.css"/>    <script type="text/javascript"            src="http://webapi.amap.com/maps?v=1.3&key=b16e9282ef90c9c932f32cc705a13b92&plugin=AMap.LineSearch,AMap.Autocomplete,AMap.Transfer,AMap.Geocoder"></script>    <script type="text/javascript" src="js/addToolbar.js"></script>    <link rel="stylesheet" href="css/foot.css"/>    <style>        .markerC {            color: #ff0000;            padding: 4px 10px;            white-space: nowrap;            font-size: 14px;            font-family: "";        }        .marker {            color: #ffffff;            white-space: nowrap;            font-size: 12px;            font-family: "";            font-weight: 900;            width: 30px;            height: 30px;            border: 1px solid #fff;            text-align: center;            -moz-border-radius: 15px;            -webkit-border-radius: 15px;            -o-border-radius: 15px;            border-radius: 15px;            display: flex;            flex-direction: column;            justify-content: center;            align-items: center;        }        .titleDiv {            display: flex;            flex-direction: row;            justify-content: center;            align-items: center;            font-size: 18px;            font-weight: 900;        }        .amap-marker .marker-route {            position: absolute;            width: 40px;            height: 44px;            color: #e90000;            background: url(images/poi-1.png) no-repeat;            cursor: pointer;        }        .amap-marker .marker-marker-bus-from {            background-position: -334px -180px;        }        .amap-marker .marker-marker-bus-from2 {            background-position: -334px -135px;        }        .copy-tips {            position: fixed;            z-index: 999;            bottom: 50%;            left: 50%;            margin: 0 0 -20px -80px;            background-color: rgba(0, 0, 0, 0.2);            filter: progid:DXImageTransform.Microsoft.Gradient(startColorstr=#30000000, endColorstr=#30000000);            padding: 6px;        }        .copy-tips-wrap {            padding: 10px 20px;            text-align: center;            border: 1px solid #F4D9A6;            background-color: #FFFDEE;            font-size: 14px;        }        input[type="button"], input[type="submit"], input[type="reset"] {            　　-webkit-appearance: none;        }        textarea {            　　-webkit-appearance: none;        }        /*以及圆角*/        .button {            border-radius: 0;        }    </style></head><body><div class="menuScroll" style="height: 1150px;margin: 0 auto;">    <!--首页标签-->    <div class="tenScrollCont">        <!--主体部分-->        <div id="banner">            <input type="hidden" id="hiddenLineArr" name="hiddenLineArr"/>            <div class="map clear">                <div class="map_tabs">                    <!--标签页切换-->                    <div id="tab">                        <div class="tabsList">                            <input type="text" placeholder="城市名称" id="selectSearch"/>                            <input type="text" placeholder="线路名称" id="selectSearch2"/>                            <input type="button" value="添加线路" id="selSearch"/>                        </div>                    </div>                    <table width="100%" border="0">                        <tr>                            <td><label style="height:13px;vertical-align:text-top;margin-top:0;">                                <input type="checkbox" id="isShowStation"                                       style="height:13px;vertical-align:text-top;margin-top:0;"/>                                <span>不显示站点标志</span>                            </label></td>                            <td align="right" style="float: right">                            </td>                        </tr>                    </table>                </div>                <div class="map_item clear">                    <div class="map_left lf">                        <div class="left1">                            <img src="images/map_all.png"/>                            <p>全部</p>                        </div>                    </div>                    <div class="map_middle lf" id="leftList">                        <div class="middle_01">                            <span class="lf" id="clearInfo"><img src="images/delete16.png"                                                                 style="width:15px;height:15px;margin-right:10px;vertical-align:middle;"/>清空</span>                            <span class="rt" id="toCompare"><img src="images/compare.png"                                                                 style="width:15px;height:15px;margin-right:10px;vertical-align:middle;"/>去看详情</span>                        </div>                    </div>                    <div class="media_right lf">                        <div id="mapContainer" style="width:949px;height:798px;">                        </div>                        <div class="button-group">                            <input type="text" placeholder="请输入商圈名称"                                   style="width:100px;height:28px;font-family:'Microsoft YaHei','Hiragino Sans GB';border:1px solid #0083ed;"                                   id="circleTitle">&nbsp;&nbsp;                            <input type="text" placeholder="请输入商圈半径"                                   style="width:100px;height:28px;font-family:'Microsoft YaHei','Hiragino Sans GB';border:1px solid #0083ed;"                                   id="circleRadius">&nbsp;&nbsp;                            <input type="button" class="button" value="设置商圈" id="stepCircle"/>                            <!--                                <input type="button" class="button" value="保存图片"  id="saveImage"/>-->                            <input type="button" class="button" value="复制线路地图链接地址" id="shareBtn"/>                            <input type="button" class="button" value="新窗口打开" id="openWindowSBtn"/>                            <input type="text" id="fz"                                   style="width:300px;height:28px;font-family:'Microsoft YaHei','Hiragino Sans GB';border:1px solid #0083ed;">                        </div>                    </div>                </div>            </div>        </div>    </div></div></div><!--****************导航菜单***************--></div><!--底部样式--></div><!--返回顶部--><!--<div class="popPanel">--><!--<div class="popPanel-inner">--><!--<div class="qrcodePanel">--><!--<img src="other/.com/mediaMap/toBusPage/img/ban" />--><!--</div>--><!--<div class="arrowPanel">--><!--<div class="arrow01"></div>--><!--<div class="arrow02"></div>--><!--</div>--><!--</div>--><!--</div>--></div><script type="text/javascript">	　var domain = document.domain;;	if(domain!=''){	 domain='http://193.112.19.21/bus/';	}else{     domain='./';    }        var startMark = [];    var endMark = [];    var lineInfoArr = new Array();    var lineStationArr = new Array();    var seStationArr = new Array();    var compArr = new Array();    var cityName = "惠州市";    var district = "";    var shareLineArr = new Array();    var isShowStation = true;    //初始化地图对象，加载地图    ////初始化加载地图时，若center及level属性缺省，地图默认显示用户当前城市范围    var editorTool, clickListener, clickListener2, map = new AMap.Map('mapContainer', {        resizeEnable: true,        zoom: 11    });    map.setFeatures(['bg', 'point', 'road'])//多个种类要素显示    map.on('complete', getCityLoad);    /*商圈绘制开始绘制开始*/    var bind3 = function () {        var circleTitle = document.getElementById('circleTitle').value;        var circleRadius = document.getElementById('circleRadius').value;        if (circleTitle == '' || circleRadius == '') {            alert('请输入商圈名称和半径');            return;        }        map.setDefaultCursor("crosshair");        clickListener3 = AMap.event.addListener(map, "click", function (e) {            var circle = new AMap.Circle({                center: e.lnglat,// 圆心位置                radius: circleRadius, //半径                strokeColor: "#F33", //线颜色                strokeOpacity: 1, //线透明度                strokeWeight: 2, //线粗细度                fillOpacity: 0,//填充透明度                strokeStyle: 'dashed'            });            circle.setMap(map);            var markerAoti = new AMap.Marker({                icon: "http://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",                position: e.lnglat            });            markerAoti.setMap(map);            // 点标记中的文本            // 自定义点标记内容            var markerContent = document.createElement("div");            var markerSpan = document.createElement("span");            markerSpan.className = 'markerC';            markerSpan.innerHTML = circleTitle;            markerContent.appendChild(markerSpan);            markerAoti.setContent(markerContent);            remove3(); //防止重复绑定        });    };    var remove3 = function () {        document.getElementById('circleTitle').value = '';        document.getElementById('circleRadius').value = '';        if (clickListener3) {            AMap.event.removeListener(clickListener3);//移除事件，以绑定时返回的对象作为参数        }    };    var button3 = document.getElementById('stepCircle');    var listener3 = AMap.event.addDomListener(button3, 'click', bind3);//给div绑定单击事件      $('#saveImage').click(function () {        alert('事件无相应');    });    /*商圈绘制*/    function getCityLoad() {        map.getCity(function (data) {            if (data['province'] && typeof data['province'] === 'string') {                cityName = data['city'];                $("#mapLocation").html(cityName);                $("#selectSearch").val(cityName);            }            if ('天津市' == data['province']) {                cityName = '天津市';                $("#selectSearch").val('天津市');            }            if ('重庆市' == data['province']) {                cityName = '重庆市';                $("#selectSearch").val('重庆市');            }            if ('上海市' == data['province']) {                cityName = '上海市';                $("#selectSearch").val('上海市');            }            if ('北京市' == data['province']) {                cityName = '北京市';                $("#selectSearch").val('北京市');            }        });    }    map.on('moveend', getCity);    function getCity() {        map.getCity(function (data) {            if (data['province'] && typeof data['province'] === 'string') {                cityName = data['city'];                $("#selectSearch").val(cityName);            }            if ('北京市' == data['province']) {                cityName = '北京市';                $("#selectSearch").val('北京市');            }            if ('天津市' == data['province']) {                cityName = '天津市';                $("#selectSearch").val('天津市');            }            if ('重庆市' == data['province']) {                cityName = '重庆市';                $("#selectSearch").val('重庆市');            }            if ('上海市' == data['province']) {                cityName = '上海市';                $("#selectSearch").val('上海市');            }            district = data['district'];        });    }    /*公交线路查询*/    function lineSearch(colorStyle) {        cityName = document.getElementById('selectSearch').value;        var lineName = document.getElementById('selectSearch2').value;        isShowStation = document.getElementById('isShowStation').checked;        //实例化公交线路查询类，只取回一条路线        var linesearch = new AMap.LineSearch({            pageIndex: 1,            city: cityName,            pageSize: 1,            extensions: 'all'        });        //搜索相关公交线路        linesearch.search(lineName, function (status, result) {            if (status === 'complete' && result.info === 'OK') {                lineSearch_Callback(result, lineName, colorStyle);            } else {                alert("暂无数据");                lineStationArr.push("");                lineInfoArr.push("");                seStationArr.push("");                //map.clearMap();            }        });    }    /*公交路线查询服务返回数据解析概况*/    function lineSearch_Callback(data, lineName, colorStyle) {        var lineArr = data.lineInfo;        var lineNum = data.lineInfo.length;        if (lineNum == 0) {        } else {            for (var i = 0; i < lineNum; i++) {                var pathArr = lineArr[i].path;                var stops = lineArr[i].via_stops;                var startPot = stops[0].location;                var endPot = stops[stops.length - 1].location;                var lineStationMarkerArr = new Array();                for (var j = 0; j < stops.length; j++) {                    var stationMark;                    if (isShowStation && j > 0 && j < stops.length - 1) {                        stationMark = new AMap.Marker({                            map: map,                            position: stops[j].location,                            offset: new AMap.Pixel(-18, -13),                            icon: new AMap.Icon({                                size: new AMap.Size(0, 0)                            })                        });                    } else {                        stationMark = new AMap.Marker({                            map: map,                            position: stops[j].location,                            offset: new AMap.Pixel(-18, -13),                            icon: new AMap.Icon({                                size: new AMap.Size(40, 40),  //图标大小                                image: "http://webapi.amap.com/theme/v1.3/images/newpc/way_btn2.png",                                imageOffset: new AMap.Pixel(0, -130)                            })                        });                    }                    //添加点标记，并使用自己的icon                    lineStationMarkerArr.push(stationMark);                }                lineStationArr.push(lineStationMarkerArr);                if (i == 0) drawbusLine(startPot, endPot, pathArr, lineName, colorStyle);            }        }    }    /*绘制路线*/    function drawbusLine(startPot, endPot, BusArr, lineName, colorStyle) {        if (lineName.indexOf("路") > 0) {            lineName = lineName.replace(/[^0-9]/ig, "");            //lineName = lineName.substring(0,lineName.indexOf("路"));            //lineName = lineName+"路";        }        var seStationMarkerArr = new Array();        //绘制起点，终点        var markerStart = new AMap.Marker({            map: map,            position: [startPot.lng, startPot.lat], //基点位置            icon: "http://webapi.amap.com/theme/v1.3/markers/n/start.png",            zIndex: 10        });        var markerContent = document.createElement("div");        markerContent.className = 'titleDiv';        var markerSpan = document.createElement("span");        var txtSpan = document.createElement("span");        markerSpan.className = 'marker';        markerSpan.style.backgroundColor = colorStyle;        markerSpan.innerHTML = lineName;        txtSpan.style.color = colorStyle;        txtSpan.innerHTML = "路";        markerContent.appendChild(markerSpan);        markerContent.appendChild(txtSpan);        markerStart.setContent(markerContent); //更新点标记内容        seStationMarkerArr.push(markerStart);        var markerEnd = new AMap.Marker({            map: map,            position: [endPot.lng, endPot.lat], //基点位置            icon: "http://webapi.amap.com/theme/v1.3/markers/n/end.png",            zIndex: 10        });        var markerContent2 = document.createElement("div2");        markerContent2.className = 'titleDiv';        var markerSpan2 = document.createElement("span2");        var txtSpan2 = document.createElement("span");        markerSpan2.className = 'marker';        markerSpan2.style.backgroundColor = colorStyle;        markerSpan2.innerHTML = lineName;        txtSpan2.style.color = colorStyle;        txtSpan2.innerHTML = "路";        markerContent2.appendChild(markerSpan2);        markerContent2.appendChild(txtSpan2);        markerEnd.setContent(markerContent2); //更新点标记内容        seStationMarkerArr.push(markerEnd);        seStationArr.push(seStationMarkerArr);        //绘制乘车的路线        busPolyline = new AMap.Polyline({            map: map,            path: BusArr,            strokeColor: colorStyle,//线颜色            strokeOpacity: 1,//线透明度            strokeWeight: 3//线宽        });        lineInfoArr.push(busPolyline);        map.setFitView();    }    //探测点相关 start    //绑定Dom事件    //bt1的click的绑定事件    var bind = function () {        map.remove(startMark);        map.setDefaultCursor("crosshair");        clickListener = AMap.event.addListener(map, "click", function (e) {            map.setDefaultCursor("pointer");            startMark = new AMap.Marker({                position: e.lnglat,                map: map,                draggable: true,  //是否可拖动                content: '<div class="marker-route marker-marker-bus-from"></div>'            });            $("#startLng").val(e.lnglat.getLng());            $("#startLat").val(e.lnglat.getLat());            remove(); //防止重复绑定            startMark.on('dragend', function (e) {                $("#startLng").val(e.lnglat.getLng());                $("#startLat").val(e.lnglat.getLat());                busTransfer();            })        });    };    var remove = function () {        if (clickListener) {            AMap.event.removeListener(clickListener);//移除事件，以绑定时返回的对象作为参数        }    };    var button1 = document.getElementById('bt1');    var listener1 = AMap.event.addDomListener(button1, 'click', bind);//给div绑定单击事件      //bt2的click的绑定事件    var bind2 = function () {        map.remove(endMark);        map.setDefaultCursor("crosshair");        clickListener2 = AMap.event.addListener(map, "click", function (b) {            map.setDefaultCursor("pointer");            endMark = new AMap.Marker({                position: b.lnglat,                map: map,                draggable: true,  //是否可拖动                content: '<div class="marker-route marker-marker-bus-from2"></div>'            });            $("#endLng").val(b.lnglat.getLng());            $("#endLat").val(b.lnglat.getLat());            //调用公交线路查询方法            busTransfer();            remove2(); //防止重复绑定            endMark.on('dragend', function (b) {                $("#endLng").val(b.lnglat.getLng());                $("#endLat").val(b.lnglat.getLat());                //调用公交线路查询方法                busTransfer();            });        });    };    var remove2 = function () {        if (clickListener2) {            AMap.event.removeListener(clickListener2);//移除事件，以绑定时返回的对象作为参数        }    };    var button2 = document.getElementById('bt2');    var listener2 = AMap.event.addDomListener(button2, 'click', bind2);//给div绑定单击事件    //探测点相关end    $("#floatPanel > .back_to_top > a.arrow").click(function () {        $("html,body").animate({            scrollTop: 0        }, 800);        return false;    });</script><script type="text/javascript">    //    下拉框    var color = new Array("#227700", "#FF0000", "#0000CC", "#FF0088", "#003377", "#5555FF", "#FF88C2", "#99FF33", "#FF7744", "#000000", "#FFCCCC", "#00DDDD", "#77FFCC", "#FFFF33", "#00DD00", "#FFAA33", "#7A0099", "#99BBFF", "#66009D", "#FF5511")    var colorIndex = 0;    var delIndex = 0;    $("#selSearch").click(function () {        var cname = cityName;        var lineName = $("#selectSearch2").val();        //把添加的线路元素加入待分享的数组中        if (colorIndex > 20) {            colorIndex = 0;        }        lineSearch(color[colorIndex]);        colorIndex++;        //动态添加左侧公交线路对比列表        //var cname = cityName;        //var lineName = $("#selectSearch2").val();        compArr.push(lineName);        addLineArr(cname, lineName);        if (cname != "" && lineName != "") {            var showName = cname + lineName;            var divname = "tmpDiv" + delIndex;            $("#leftList").append("<div class='middle_02' id='" + divname + "'><p><img onclick='delDiv(" + delIndex + ",&quot;" + cname + "&quot;,&quot;" + lineName + "&quot;)' src='images/delete11.png' style='width:15px;height:15px;margin-right:10px;vertical-align:middle;'/>" + showName + "</p></div>");            delIndex++;        }    });    $("#selectSearch2").focus(function () {        cityName = $("#selectSearch").val();        var auto = new AMap.Autocomplete({            city: cityName,            input: "selectSearch2"        });    });    Array.prototype.remove = function (val) {        var index = this.indexOf(val);        if (index > -1) {            this.splice(index, 1);        }    };    function delDiv(delIndex, cname, lineName) {        var targetId = "#tmpDiv" + delIndex;        //删除div        $(targetId).remove();        //删除待比较数组中的元素        compArr.remove(lineName);        //隐藏线路        lineInfoArr[delIndex].hide();        //移除途径站点        var lineStations = lineStationArr[delIndex];        for (var i = 0; i < lineStations.length; i++) {            map.remove(lineStations[i]);        }        //移除起点，终点        var seStations = seStationArr[delIndex];        for (var j = 0; j < seStations.length; j++) {            map.remove(seStations[j]);        }    }    $("#clearInfo").click(function () {        map.clearMap();        shareLineArr = new Array();        $("#hiddenLineArr").val('');        delIndex = 0;        colorIndex = 0;        compArr.length = 0;        $(".middle_02").remove();    });    $("#toCompare").click(function () {        if (compArr.length == 0) {            alert("请添加对应的公交线路");            return;        }        var lineStr = compArr.toString();        var cname = $("#selectSearch").val();        var  url=domain+"toBusComparePage.html?lineStr=" + encodeURI(encodeURI(lineStr)) + "&cityName=" + encodeURI(encodeURI(cname));        window.open(url)    });    function busTransfer() {        var trans;        var slng = $("#startLng").val();        var slat = $("#startLat").val();        var elng = $("#endLng").val();        var elat = $("#endLat").val();        if (slng == "" || slat == "" || elng == "" || elat == "") {            $("#startLng").val("");            $("#startLat").val("");            $("#endLng").val("");            $("#endLat").val("");            alert("请选择起点和终点,如果已经选择或者输入,请确保地址完整");            return;        }        transOptions = {            city: cityName,                         //当前地图显示的城市            policy: AMap.TransferPolicy.NO_SUBWAY //乘车策略        };        //构造公交换乘类        trans = new AMap.Transfer(transOptions);        //根据起、终点坐标查询公交换乘路线        trans.search(new AMap.LngLat(slng, slat), new AMap.LngLat(elng, elat), function (status, result) {            //TODO:开发者使用result自己创建交互面板和地图展示            if (status == 'complete' && result.info == 'OK') {                compArr = getTitle(result.plans);                alert("已添加以下线路:" + compArr);                addCompare(compArr);            } else {                alert("暂无数据，请清空重试！");                map.clearMap();                $("#startLng").val("");                $("#startLat").val("");                $("#endLng").val("");                $("#endLat").val("");            }        });    }    function getTitle(plans) {        var lineNameArr = new Array();        for (var i = 0; i < plans.length; i++) {            var plan = plans[i];            var segments = plan.segments;            for (var j = 0; j < segments.length; j++) {                var segment = segments[j],                    mode = segment.transit_mode;                if (mode == "WALK") {                } else if (mode == "BUS" || mode == "SUBWAY") {                    var lineName = segment.transit.lines[0].name;                    lineName = lineName.replace(/\(.+\)/g, "");                    var index = $.inArray(lineName, lineNameArr);                    if (index == -1) {                        lineNameArr.push(lineName);                    }                } else if (mode == "RAILWAY") {                }            }        }        return lineNameArr;    }    function addCompare(arr) {        var cname = cityName;        for (var i = 0; i < arr.length; i++) {            var showName = cname + arr[i];            var divname = "tmpDiv" + delIndex;            $("#leftList").append("<div class='middle_02' id='" + divname + "'><p><img onclick='delDiv(" + delIndex + ",&quot;" + cname + "&quot;,&quot;" + arr[i] + "&quot;)' src='images/delete11.png' style='width:15px;height:15px;margin-right:10px;vertical-align:middle;'/>" + showName + "</p></div>");            delIndex++;        }    }    //首页相关跳转 结束</script><script type="text/javascript">    $(function () {        $(".tabs ul li").click(function () {            var index = $(this).index();            $(this).addClass("currents1").siblings().removeClass("currents1");            $(".co").eq(index).addClass("sho").siblings().removeClass("sho");        })    })    function ShowHotPot(index, hotNames) {        hotPotIndex = index;        PopupModal("#HotPotWindow");        var c = document.getElementById("divHotNames");        if (hotNames == "")            c.style.display = "none";        else {            c.style.display = "";            c.innerHTML = hotNames;        }    }    function addLineArr(cityName, lineName) {        shareLineArr.push(lineName);        var shareData = compArr.join(",");        //拼分享链接        isShowStation = document.getElementById('isShowStation').checked;        var shareUrl = domain+"toShareMap.html?isShowStation=" + isShowStation + "&city=" + encodeURI(encodeURI(cityName)) + "&lineStr=" + encodeURI(encodeURI(shareData));        $("#hiddenLineArr").val(shareUrl);        $("#fz").val(shareUrl);    }    $("#shareBtn").click(function () {        var Url2 = $("#hiddenLineArr").val();        if (Url2 == "") {            alert('请先添加路线再复制');            return        }        console.log(Url2)        Copy(Url2);    });    function Copy(content, message) {        document.getElementById('fz').select();        document.execCommand("copy");        if (message == null) {            alert("复制成功");        } else {            alert(message);        }    }    $('#openWindowSBtn').click(function () {        var Url2 = $("#hiddenLineArr").val();        if (Url2 == "") {            alert('请添加路线，再点击');            return        }        window.open(Url2);    });</script><script type="text/javascript">    //计算输入探测点坐标    function searchAddress() {        var search11 = $('#search11').val();        geocoder(search11);        var search12 = $('#search12').val();        geocoder1(search12);    }    function geocoder(data) {        var geocoder = new AMap.Geocoder({            //city: '010', //城市，默认：“全国”            radius: 1000 //范围，默认：500        });        //地理编码,返回地理编码结果        geocoder.getLocation(data, function (status, result) {            if (status === 'complete' && result.info === 'OK') {                geocoder_CallBack(result);            }        });    }    //地理编码返回结果展示    function geocoder_CallBack(data) {        var resultStr = "";        //地理编码结果数组        var geocode = data.geocodes;        for (var i = 0; i < geocode.length; i++) {            //拼接输出html            //alert(geocode[i].location.getLng());            $('#startLng').val(geocode[i].location.getLng());            $('#startLat').val(geocode[i].location.getLat());        }    }    function geocoder1(data) {        var geocoder = new AMap.Geocoder({            //city: '010', //城市，默认：“全国”            radius: 1000 //范围，默认：500        });        //地理编码,返回地理编码结果        geocoder.getLocation(data, function (status, result) {            if (status === 'complete' && result.info === 'OK') {                geocoder_CallBack1(result);            }        });    }    //地理编码返回结果展示    function geocoder_CallBack1(data) {        var resultStr = "";        //地理编码结果数组        var geocode = data.geocodes;        for (var i = 0; i < geocode.length; i++) {            $('#endLng').val(geocode[i].location.getLng());            $('#endLat').val(geocode[i].location.getLat());        }        busTransfer();    }</script></body></html>